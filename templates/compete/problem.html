{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load compete %}

{% block title %}
    {{ problem.full_name }} - CodeHighp
{% endblock %}

{% block body %}
<main class="fullwidth">
{% contest_info %}
    <h2>{{ problem.full_name }}</h2>
<pre>{{ problem.humanized_limits|safe }}</pre>

{{ problem.statement|safe }}
<hr />

{% if user.is_authenticated %}
{% if can_submit %}
    {% crispy form %}
    <hr />
{% else %}
    You need to register for the contest to submit solutions.
{% endif %}
    {% if runs %}
        <h3>
            <a href="{% url 'problem_runs' problem.id %}">Your runs</a>
        </h3>
        {% run_list runs %}
        {% if runs_truncated %}
            <em>
                <a href="{% url 'problem_runs' problem.id %}">Show all runs</a>
            </em>
        {% endif %}
    {% endif %}
    {% if not runs and can_submit %}
        <em>You don't have any attempts on this problem.</em>
    {% endif %}
{% else %}
    <em>
        <a href="{% url 'login' %}">Log in</a> to submit solutions
    </em>
{% endif %}
</main>
{% endblock %}